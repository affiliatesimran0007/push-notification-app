<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Alerts Intuit - Push Notification Integration</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            margin: 0;
            padding: 0;
            background-color: #f5f5f5;
        }
        .container {
            max-width: 800px;
            margin: 0 auto;
            padding: 40px 20px;
        }
        .card {
            background: white;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            padding: 40px;
            margin-bottom: 20px;
        }
        h1 {
            color: #333;
            margin-bottom: 10px;
        }
        .subtitle {
            color: #666;
            margin-bottom: 30px;
        }
        .status-box {
            padding: 15px;
            border-radius: 8px;
            margin: 20px 0;
            font-weight: 500;
        }
        .status-box.info {
            background-color: #e3f2fd;
            color: #1976d2;
            border: 1px solid #1976d2;
        }
        .status-box.success {
            background-color: #e8f5e9;
            color: #388e3c;
            border: 1px solid #388e3c;
        }
        .status-box.error {
            background-color: #ffebee;
            color: #d32f2f;
            border: 1px solid #d32f2f;
        }
        .code-block {
            background-color: #f5f5f5;
            border: 1px solid #e0e0e0;
            border-radius: 5px;
            padding: 20px;
            font-family: 'Courier New', monospace;
            font-size: 14px;
            overflow-x: auto;
            margin: 20px 0;
        }
        .button {
            background-color: #1976d2;
            color: white;
            border: none;
            padding: 12px 30px;
            font-size: 16px;
            border-radius: 5px;
            cursor: pointer;
            margin-right: 10px;
        }
        .button:hover {
            background-color: #1565c0;
        }
        .button.secondary {
            background-color: #757575;
        }
        .button.secondary:hover {
            background-color: #616161;
        }
        code {
            background-color: #f5f5f5;
            padding: 2px 6px;
            border-radius: 3px;
            font-family: monospace;
        }
        .steps {
            margin: 30px 0;
        }
        .step {
            display: flex;
            align-items: flex-start;
            margin-bottom: 20px;
        }
        .step-number {
            background-color: #1976d2;
            color: white;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            margin-right: 15px;
            flex-shrink: 0;
        }
        .step-content {
            flex: 1;
        }
        .step-content h3 {
            margin: 0 0 10px 0;
            color: #333;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="card">
            <h1>Alerts Intuit - Push Notification Setup</h1>
            <p class="subtitle">Test page for integrating push notifications on alerts-intuit.com</p>
            
            <div id="status" class="status-box info">
                Ready to test push notification integration
            </div>

            <div class="steps">
                <h2>Setup Instructions</h2>
                
                <div class="step">
                    <div class="step-number">1</div>
                    <div class="step-content">
                        <h3>Create Landing Page</h3>
                        <p>Go to <a href="https://push-notification-app-steel.vercel.app/landing" target="_blank">Landing Pages</a> and create a new landing page for alerts-intuit.com</p>
                    </div>
                </div>

                <div class="step">
                    <div class="step-number">2</div>
                    <div class="step-content">
                        <h3>Update Configuration</h3>
                        <p>Update the landing ID in the integration code below (currently set to "1")</p>
                    </div>
                </div>

                <div class="step">
                    <div class="step-number">3</div>
                    <div class="step-content">
                        <h3>Add to Your Website</h3>
                        <p>Copy this code to the <code>&lt;head&gt;</code> section of alerts-intuit.com:</p>
                    </div>
                </div>
            </div>

            <h2>Integration Code</h2>
            <div class="code-block" id="integration-code">
&lt;!-- Push Notifications for alerts-intuit.com --&gt;
&lt;script&gt;
(function() {
  // Configuration for alerts-intuit.com
  const PUSH_CONFIG = {
    appUrl: 'https://push-notification-app-steel.vercel.app',
    landingId: '1', // Update with your actual landing page ID
    vapidKey: 'BNV70f-uHInqVEOT9r2d6pVfK5WViCXdtoYjB87Nf8WUQZ6mDMSXEXGFQmJXl6bvGpvzL2jVSuPZUk-S9YS8rYc',
    
    // Optional: Custom redirects for alerts-intuit.com
    redirects: {
      onAllow: 'https://alerts-intuit.com/thank-you',
      onBlock: 'https://alerts-intuit.com/notifications-info'
    }
  };

  // Load the integration script
  const script = document.createElement('script');
  script.src = PUSH_CONFIG.appUrl + '/simple-integration.js';
  script.async = true;
  
  // Initialize when script loads
  script.onload = function() {
    if (window.PushNotificationIntegration) {
      window.PushNotificationIntegration.init(PUSH_CONFIG);
    }
  };
  
  document.head.appendChild(script);
})();
&lt;/script&gt;</div>

            <h2>Test Integration</h2>
            <p>Click the button below to test the integration on this page:</p>
            <button class="button" onclick="testIntegration()">Test Push Notifications</button>
            <button class="button secondary" onclick="checkStatus()">Check Status</button>

            <h2>What Happens Next?</h2>
            <ol>
                <li>Users visiting alerts-intuit.com will be redirected to a bot check page</li>
                <li>After verification, they'll see the browser's notification permission prompt</li>
                <li>If they allow, they'll be subscribed and redirected to your thank-you page</li>
                <li>If they block, they'll be redirected to your notifications-info page</li>
                <li>You can send push notifications from your dashboard</li>
            </ol>
        </div>

        <div class="card">
            <h2>Alternative: Simple One-Line Integration</h2>
            <p>For even easier integration, use this single line:</p>
            <div class="code-block">
&lt;script src="https://push-notification-app-steel.vercel.app/simple-integration.js"&gt;&lt;/script&gt;</div>
            <p><strong>Note:</strong> You'll need to update the configuration in the script file with your landing page ID.</p>
        </div>
    </div>

    <script>
        function updateStatus(message, type = 'info') {
            const statusEl = document.getElementById('status');
            statusEl.textContent = message;
            statusEl.className = `status-box ${type}`;
        }

        function testIntegration() {
            updateStatus('Loading integration script...', 'info');
            
            // Test configuration
            const PUSH_CONFIG = {
                appUrl: 'https://push-notification-app-steel.vercel.app',
                landingId: '1',
                vapidKey: 'BNV70f-uHInqVEOT9r2d6pVfK5WViCXdtoYjB87Nf8WUQZ6mDMSXEXGFQmJXl6bvGpvzL2jVSuPZUk-S9YS8rYc',
                redirects: {
                    onAllow: null, // Stay on this page for testing
                    onBlock: null  // Stay on this page for testing
                }
            };

            // Store config globally for the integration script
            window.PUSH_CONFIG = PUSH_CONFIG;

            // Load integration script
            const script = document.createElement('script');
            script.src = PUSH_CONFIG.appUrl + '/simple-integration.js';
            script.async = true;
            
            script.onload = function() {
                updateStatus('Integration script loaded! Check for bot verification redirect...', 'success');
            };
            
            script.onerror = function() {
                updateStatus('Failed to load integration script. Check console for errors.', 'error');
            };
            
            document.head.appendChild(script);
        }

        function checkStatus() {
            if ('Notification' in window) {
                const permission = Notification.permission;
                if (permission === 'granted') {
                    updateStatus('Notifications are enabled! Permission: ' + permission, 'success');
                } else if (permission === 'denied') {
                    updateStatus('Notifications are blocked. Permission: ' + permission, 'error');
                } else {
                    updateStatus('Notifications not yet requested. Permission: ' + permission, 'info');
                }
                
                // Check service worker
                if ('serviceWorker' in navigator) {
                    navigator.serviceWorker.getRegistrations().then(registrations => {
                        if (registrations.length > 0) {
                            updateStatus(updateStatus.textContent + ' | Service Workers: ' + registrations.length, 'success');
                        }
                    });
                }
            } else {
                updateStatus('This browser does not support push notifications', 'error');
            }
        }

        // Check status on page load
        window.addEventListener('load', checkStatus);
    </script>
</body>
</html>